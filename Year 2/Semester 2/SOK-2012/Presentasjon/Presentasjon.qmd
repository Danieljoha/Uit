---
title: "Eksperimentell metode"
subtitle: "Handelshøgskolen"
date: last-modified
date-format: "DD-MM-YYYY"
echo: false
warning: false
format: 
  revealjs:
    self-contained: true
    auto-stretch: false
    theme: moon
    view-distance: 10
---

## Oppgave 1.

### A. Hvilke spørsmål om menneskelig adferd kan besvares ved hjelp av eksperimentelle metoder? 

::: {.fragment .highlight-green fragment-index=1}
Effekt av økonomiske insentiver på arbeidsinnsats
:::
::: {.fragment .highlight-red .strike fragment-index=1}
Effekt av økonomiske insentiver på høyde
:::
::: {.fragment .highlight-red .strike fragment-index=1}
Effekt av økonomisk utdanning på kjønn
:::
::: {.fragment .highlight-green fragment-index=1}
Effekt av økonomisk utdanning på sparing
:::
::: {.fragment .highlight-green fragment-index=1}
Effekt av prisendringer på innkjøp av varer
:::
::: {.fragment .highlight-red .strike fragment-index=1}
Effekt av prisendringer på alder
:::


::: notes

Besvare spørsmål der variablene kan manipuleres og kontrolleres. 

- **Effekt av økonomiske insentiver på arbeidsinnsats**: Kan kontrollere variasjonen av økonomiske insentiver og måle endringer i arbeidsinnsatsen. 

- **Effekt av økonomiske insentiver på høyde**: 
Høyde ukontrollerbar variasjon bestemmes av faktorer vi ikke kan kontrollere eller variere gjennom økonomiske insentiver. 


- **Effekt av økonomisk utdanning på kjønn**: 
Kjønn ukontrollerbar variasjon bestemmes av faktorer vi ikke kan kontrollere eller variere gjennom økonomisk utdanning.

- **Effekt av økonomisk utdanning på sparing**: 
Kontrollere variasjonen av økonomisk utdanning og observere effektene på sparing. 

- **Effekt av prisendringer på innkjøp av varer**: 
Kan kontrollere prisene på ulike varer og observere endringer i forbruksmønstre. 


- **Effekt av prisendringer på alder**: 
Alder ukontrollerbar variasjon bestemmes av faktorer vi ikke kan kontrollere eller variere gjennom prisendringer. 


Konklusjon: Eksperimenter er ikke egnet for å undersøke effekter på medfødte egenskaper eller andre faktorer som ikke kan endres gjennom eksperimentelle inngrep, siden disse er ukontrollerbare variabler.
:::


## Oppgave 1.

### B Forklar hva en RCT er og hva det er godt for?


::: columns
::: {.column width="50%"}
#### Gruppe 1: 

Får medisin

::: {.fragment fragment-index=1}
Nesten 100% fikk økning i muskelmasse og økt sin høyde
:::

::: {.fragment fragment-index=4}
Gjennomsnittsalder 10 år
:::
:::

::: {.column width="50%"}
#### Gruppe 2: 

Får placebo

::: {.fragment fragment-index=1}
Nesten 100% fikk nedgang i muskelmasse og minket sin høyde
:::
::: {.fragment fragment-index=4}
Gjennomsnittsalder 90 år
:::
:::
:::




::: {.fragment fragment-index=2}
:::{.r-stack .fragment .highlight-red .strike fragment-index=6}
Mirakel medisin
:::
::: {.r-stack .fragment fragment-index=3}
Forskjellen mellom gruppene?
:::
:::





::: notes


- **Starter med et eksempel**:
    - **Forskjellen mellom gruppene**: 
    Seleksjonsproblemet oppstår når deltakerne i gruppene er forskjellige fra hverandre. I dette tilfellet er gjennomsnittsalderen forskjellig mellom gruppene.
    Den observerte forskjellen kan feilaktig tilskrives medisinen hvis vi ikke tar hensyn til aldersforskjellen. 
    
RCTs skal sikre at slike variabler er balansert mellom gruppene for å gi en rettferdig vurdering av medisinens effekt.
:::







## Oppgave 2. Test om mennesker gjør rasjonelle valg




### 2.1. Hvilken effekt har et kurs i sannsynlighet på valg av konvolutter i et eksperiment?


Forsøket: 

- Lager 2 grupper der individene får 100kr

- Forklarer premisser om et spill.

- Gir muligheten til å betale for å spille

- Noterer hvor mange som tar risiko, og om risiko tas, bytter de eller ikke.

- Gjentar eksperimentet etter den ene gruppen er kurset i sannsynlighet





::: notes
- **Eksperimentets mål**: Effekt på kunnskap om sannsynlighet påvirker beslutningstaking i et scenario med usikkerhet.
- **Premissene for spillet**: 
    - Start med tre konvolutter, hvor en inneholder 150kr og to er tomme.
    - Før deltakerne låser inn sitt valg, åpnes en av de tomme konvoluttene.
    - Deltakerne får muligheten til å bytte konvolutt.
    - De må betale 50kr av de 100kr de fikk for å delta i spillet.
- **Eksperimentdesign**:
    - **Steg 1:**: Kontrollgruppe og Eksperimentgruppe får 100kr og spiller spillet uten ekstra opplæring.
    - **Steg 2**: Kontrollgruppen og Eksperimentgruppen Spiller igjen men eksperimentgruppen har fått et kurs i sannsynlighet.
- **Hypotese**: Eksperimentgruppen vil være mer risikotakende og mer tilbøyelige til å bytte konvolutt etter at en tom konvolutt er åpnet, fordi de forstår at sannsynligheten for å vinne øker ved bytte (Monty Hall-problemet).
- **Forventede resultater**: Hvis sannsynlighetskurset er effektivt, vil eksperimentgruppen vise en høyere andel rasjonelle valg (bytte konvolutt) sammenlignet med kontrollgruppen.
- **Analyse**:
    - Sammenligne andelen deltakere i hver gruppe som velger å bytte konvolutt.
    - Vurdere om kurset i sannsynlighet har en statistisk signifikant effekt på beslutningene.
:::





## 2.2. Bruk google scholar til å finne en eller to publiserte vitenskapelig studie (teoretisk eller empirisk) som forklarer hvorfor X kan ha en effekt på Y .
::: {.r-stack}
::: {.fragment .fade-in-then-out}
- **Impact of warning and brief intervention messages on knowledge of gambling risk, irrational beliefs and behaviour**
  - Studien viser at advarsler og kortvarige intervensjonsmeldinger øker kunnskapen om gamblingrisiko, men har ingen signifikant effekt på gamblingatferd.

:::
::: {.fragment .fade-in-then-out}
- **The role of statistical knowledge in gambling decisions: Moment vs risk dimension approaches**
  - Studien antyder at statistisk kunnskap reduserer kognitiv kompleksitet ved risikovurdering og forbedrer beslutningstaking i gambling.

:::
::: {.fragment .fade-in-then-out}
- **Does learning about the mathematics of gambling change gambling behavior?**
  - Studien viser at forbedret kunnskap om odds og matematisk forventning øker motstandsdyktigheten mot gamblingfallasier, men har ingen effekt på faktisk gamblingatferd.

:::
:::
::: notes
- **Studieeksempler**:
  - Advarsler: Informasjon om gamblingrisiko øker kunnskap, men endrer ikke atferd.
  - Statistikk kunnskap: Statistisk kunnskap reduserer kognitiv kompleksitet og forbedrer risikovurdering.
  - Annen om matematikk og statistikk kunnskap: Bedre forståelse av gamblingodds øker motstandsdyktighet, men endrer ikke gamblingatferd.
:::





## 3. Design ett eksperiment.

Der du måler effekten av X på Y ved hjelp av en kontrollgruppe der individer tilfeldig trekkes inn i gruppe $\overline T$ eller gruppe $T$ .


:::{.r-stack}
::: {.fragment .fade-in-then-out}
- **X**: Sannsynligheten for å velge å bytte konvolutt i Monty Hall-problemet, målt som andelen deltakere som velger å bytte etter å ha mottatt informasjon om innholdet i en av de andre konvoluttene.
- **Y**: Deltakelse i et kurs i sannsynlighet


- **Intervensjon**: Kurs i sannsynlighet dekker grunnleggende sannsynlighetsteori og grundig gjennomgang av Bayes' teorem.
::: 
::: {.fragment .fade-in}
### Eksempel på resultat


```{python}
#| echo: true
#| code-fold: true
#| code-summary: scuffed kode


import numpy as np
import pandas as pd



def monte_carlo_simulation(number_of_sims, groupsize):
    all_results = []

    for _ in range(number_of_sims):
        results = []
        #juster sannsynligheter for gruppe 2 
        gamble_prob_adjustment = np.random.uniform(0.002, 0.02)  #for å gamble mellom 0.02 og 0.07
        switch_prob_adjustment = np.random.uniform(0.2, 0.4)    #for å bytte mellom 0.2 og 0.4

        #gruppe1
        for _ in range(groupsize):
            control_gamble_prob = np.random.uniform(0.2, 0.4)  #Tilfeldig sannsynlighet for å gamble
            control_switch_prob = np.random.uniform(0.2, 0.4)  #Og tilfeldig for å bytte

            control_gambles = np.random.rand() < control_gamble_prob  #er sannsynligheten for å gamble høyere enn tilfeldig tall så ja
            control_switches = control_gambles and (np.random.rand() < control_switch_prob)  #samme her men om de gambler

            results.append({'group': 'control',
                'gambles': control_gambles,
                'switches': control_switches}) #putt i aids indeks

        #grupp2 nu
        for _ in range(groupsize):
            exp_gamble_prob = min(1, np.random.uniform(0.2, 0.4) + gamble_prob_adjustment) 
            exp_switch_prob = min(1, max(np.random.uniform(0.2, 0.4) + switch_prob_adjustment, 0.2))  #har me min/max så det ikke går over 1 eller under 0

            exp_gambles = np.random.rand() < exp_gamble_prob  
            exp_switches = exp_gambles and (np.random.rand() < exp_switch_prob)  

            results.append({'group': 'experimental',
                'gambles': exp_gambles,
                'switches': exp_switches})

        all_results.extend(results)

    return pd.DataFrame(all_results)  #får ut resultatene

#antall simuleringer og lagret i variabel for å regne t test osv.
simulation_results = monte_carlo_simulation(10000, 100)


control_gambles = simulation_results[simulation_results['group'] == 'control']['gambles'].mean()
control_switches_given_gamble = simulation_results[(simulation_results['group'] == 'control') & (simulation_results['gambles'])]['switches'].mean() 

exp_gambles = simulation_results[simulation_results['group'] == 'experimental']['gambles'].mean() 
exp_switches_given_gamble = simulation_results[(simulation_results['group'] == 'experimental') & (simulation_results['gambles'])]['switches'].mean()  
#håper jeg ikke viste denne koden
print(f'''Kontrollgruppen velger å gamble med en sannsynlighet på {round(control_gambles*100,4)}% og bytter konvulutt med en sannsynlighet på {round(control_switches_given_gamble*100,4)}% gitt at de gambler.\nEksperimentgruppen velger å gamble med en sannsynlighet på {round(exp_gambles*100,4)}% og bytter konvulutt med en sannsynlighet på {round(exp_switches_given_gamble*100, 4)}% gitt at de gambler.''')

```

:::
:::

## Effekt og analyse

4. Forklar enklest mulig hvordan oppsettet ditt viser effekten av X på Y.

Et mål $M_t$ av effekten X på Y ved å studere $M_{\overline T} − M_{\underline T}$ .


Når vi nå ser hvilke valg de 2 gruppene har tatt, så kan vi se om det har vært en signifikant endring i om de de velger å gamble eller ikke eller velger å bytte konvulutt eller ikke.

::: notes
- **X**: Sannsynligheten for å velge å bytte konvolutt i Monty Hall-problemet, målt som andelen deltakere som velger å bytte etter å ha mottatt informasjon om innholdet i en av de andre konvoluttene.
- **Y**: Deltakelse i et kurs i sannsynlighet
:::

## Effekt og analyse 

### Bevis på best valg

Siden vi vet at konvolutten som åpnes er tom så setter vi opp Monty Hall problemet i med Bayes. 
Da kan vi se hvordan denne informasjonen påvirker eller "oppdaterer" sannsynligheten for at premien befinner seg i en bestemt konvolutt.

## Effekt og analyse 

### Bevis på best valg

For å vise dette matematisk så definerer vi hendelsene:

-   $G_i$: Hendelsen at gevinsten (150 kr) er i konvolutt $i$ (hvor $i$ kan være 1, 2, eller 3).

-   $D_j$: Hendelsen at deltakeren velger konvolutt $j$ (hvor $j$ også kan være 1, 2, eller 3).

-   $V_k$: Hendelsen at verten åpner konvolutt $k$ (hvor $k$ kan være 1, 2, eller 3) og viser at den er tom.


## Effekt og analyse 

### 1. Uavhengighet

Vi antar at deltakeren velger en konvolutt tilfeldig, og at gevinsten er plassert tilfeldig i en av de tre konvoluttene. Dette betyr at hendelsene $G_i$ og $D_j$ er uavhengige for alle $i$ og $j$ .

Dette betyr at: $P(G_i \mid D_j) = P(G_i)$ for alle $i$ og $j$.

## Effekt og analyse 

### 2. Initial Sannsynligheter

Før noe valg er gjort, er sannsynligheten for at gevinsten er i en hvilken som helst konvolutt lik: 
$$ P(G_i) = P(D_j) = P(V_k) = \frac{1}{3} $$ for $i, j, k = 1, 2, 3$.

## Effekt og analyse 

### 3. Avhengighet. Første valg blir gjort.

Når vi åpner den andre konvolutten så er den avhengig av hvilken konvolutt deltakeren har valgt og hvor gevinsten befinner seg. 
Vi åpner alltid åpner en tom konvolutt og aldri den som deltakeren har valgt eller den som inneholder gevinsten.

Dette betyr at: $$ P(V_k \mid G_i, D_j) $$ er 0 hvis $k = i$ eller $k = j$ (med mindre $i = j$), og ellers 1 delt på antall gjenværende konvolutter.


## Effekt og analyse 

### 4. Bayes Teorem

Bayes teorem forteller oss hvordan vi kan oppdatere sannsynligheten for at gevinsten er i en bestemt konvolutt gitt at verten åpner en annen konvolutt: 
$$ 
P(G_i \mid V_k, D_j) = \frac{P(V_k \mid G_i, D_j) \cdot P(G_i)}{P(V_k \mid D_j)} 
$$

::: notes
sannsynligheten for $G_i$ gitt $V_k$ og  $D_j$
:::


## Effekt og analyse 

### 4. Bayes Teorem
For å beregne $P(V_k \mid D_j)$ under brøkstreken er sannsynligheten for at verten åpner konvolutt $k$, gitt at deltakeren har valgt konvolutt $j$.

Dette krever marginalisering over alle mulige steder gevinsten kan være: $$ P(V_k \mid D_j) = \sum_{i=1}^3 P(V_k \mid G_i, D_j) \cdot P(G_i) $$

::: notes
Marginalisering å summere over alle mulige utfall for å få en total sannsynlighet som ikke avhenger av den variabelen som blir marginalisert over. 

I uttrykket $P(V_k \mid D_j)$, som er sannsynligheten for at verten åpner konvolutt $k$ gitt at deltakeren har valgt konvolutt $j$, krever marginalisering over alle mulige steder gevinsten kan være (representert ved $G_i$). Dette kan forstås som å fjerne avhengigheten av den spesifikke plasseringen av gevinsten ved å summere over alle mulige plasseringer.

Mer konkret betyr dette:
$ P(V_k \mid D_j) = \sum_{i=1}^3 P(V_k \mid G_i, D_j) \cdot P(G_i) $

Her er hvert ledd i summen:
- $P(V_k \mid G_i, D_j)$ er sannsynligheten for at verten åpner konvolutt $k$ gitt at gevinsten er i konvolutt $G_i$ og deltakeren har valgt konvolutt $D_j$.
- $P(G_i)$ er sannsynligheten for at gevinsten er i konvolutt $G_i$.

Ved å summere over alle mulige $G_i$ (i dette tilfellet $i = 1, 2, 3$), får vi en total sannsynlighet $P(V_k \mid D_j)$ som ikke lenger avhenger av $G_i$.

Så marginalisering i denne konteksten betyr å summere over de ulike verdiene til $G_i$ for å "fjerne" denne variabelen fra den betingede sannsynligheten vi er interessert i.
:::


## Effekt og analyse Eksempel

Anta at deltakeren velger konvolutt 1 ($D_1$) og verten åpner konvolutt 3 ( $V_3$ ), som er tom. Vi vil beregne $P(G_2 \mid V_3, D_1)$.

-   $P(V_3 \mid G_1, D_1) = 1/2$ fordi verten må velge mellom konvolutt 2 og 3 når gevinsten er i konvolutt 1 og deltakeren har valgt konvolutt 1.
-   $P(V_3 \mid G_2, D_1) = 1$ fordi verten bare kan åpne konvolutt 3 når gevinsten er i konvolutt 2 og deltakeren har valgt konvolutt 1.
-   $P(V_3 \mid G_3, D_1) = 0$ fordi verten aldri vil åpne konvolutten med gevinsten.

## Effekt og analyse 

### Eksempel

Så:

$$P(V_3 \mid D_1) = P(V_3 \mid G_1, D_1) \cdot P(G_1)+ \\ P(V_3 \mid G_2, D_1) \cdot P(G_2) + P(V_3 \mid G_3, D_1) \cdot P(G_3)$$



$$ P(V_3 \mid D_1) = \frac{1}{2} \cdot \frac{1}{3} + 1
\cdot \frac{1}{3} + 0 \cdot \frac{1}{3} = \frac{1}{2} $$

## Effekt og analyse 

### Eksempel

Deretter:

$$ P(G_2 \mid V_3, D_1) = \frac{P(V_3 \mid G_2, D_1) \cdot P(G_2)}{P(V_3 \mid D_1)} = \frac{1 \cdot \frac{1}{3}}{\frac{1}{2}} = \frac{2}{3} $$

Dette viser at det er en $\frac{2}{3}$ sannsynlighet for at gevinsten er i den konvolutten deltakeren ikke valgte, som er konvolutt 2 i dette tilfellet.


## 5. Forklar hvordan du skal analysere dataene fra eksperimentet ditt for å vise effekten av X på Y .

#### Forklar de grunnlegende premissene for eventuelle statistiske metoder du anvender.

Vi kan bruke en z-test for å se om det er en signifikant forskjell i valgene til de som har fått kurset i sannsynlighet, og de som ikke har fått kurset gitt at vi får nok deltagere.

De grunnleggende premissene er da at vi får minimum 30 stykk i hver gruppe og at de er uavhengige av hverandre.

Det kan også kanskje brukes en T test men vi er usikker siden dataen i gruppene er binær.

## 6

### 6.1 Skriv en enkel pre-analyse plan for eksperimentet ditt.

Preanalysis plan:

Vi gir folk 100kr, og starter med å fortelle de om premissene om et spill hvor de får et valg mellom 3 konvolutter der en av konvoluttene inneholder 150kr og to av de inneholder ingenting. Før de låser inn sitt svar så forteller vi at vi vet hvilken konvolutt pengene ligger i og åpner en av de med ingenting i seg, De får så en mulighet til å bytte valg av konvolutter. De blir så gitt et valg om å spille det spillet men at det koster de 50kr av de 100kr de fikk.

## 6

### 6.1 Skriv en enkel pre-analyse plan for eksperimentet ditt.


Vi gir igjen folk 100kr men denne gangen så gir vi den ene gruppen et kurs i sannsynlighet først og den andre gruppen får ikke kurset. Vi ønsker å se om de som har fått kurset i sannsynlighet tar bedre valg enn de som ikke har fått kurset.

Vi vil så bruke en t-test for å se om det er en signifikant forskjell i valgene til de som har fått kurset i sannsynlighet og de som ikke har fått kurset.

## 6

### 6.2 Forklar hvorfor det er viktig å publisere en pre-analysis plan før du analyserer data. Hvordan hjelper pre-analysis plan å tolke data for utenforstående?

Det er viktig å publisere en pre-analyse plan før du analyserer data fordi det er lett å manipulere dataene for å få det resultatet du ønsker. Ved å publisere en pre-analyse plan så kan du vise at du ikke har manipulert dataene og at du har fulgt planen du har lagt. Dette hjelper utenforstående å tolke dataene fordi de kan se at du har fulgt planen og at du ikke har manipulert dataene for å få det resultatet du ønsker.


